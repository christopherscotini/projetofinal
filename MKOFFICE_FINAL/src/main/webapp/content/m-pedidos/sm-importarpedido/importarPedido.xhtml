<?xml version='1.0' encoding='ISO-8859-1' ?>
<ui:composition template="/template/template_main.xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

	<ui:define name="cssImports">
		<link type="text/css" rel="stylesheet"
			href="#{facesContext.externalContext.requestContextPath}/css/menu/pedidos/pedido-ui.css" />
	</ui:define>

	<ui:define name="jsImports">
		<script type="text/javascript"
			src="#{facesContext.externalContext.requestContextPath}/javascript/menu_estoque/validate_pedido.js" />
	</ui:define>

	<ui:define name="breadcrumb">
		<p:breadCrumb>
			<p:menuitem value="TelaInicial"
				action="#{clienteBean.scheduleBean.telaInicial()}" ajax="false" />
			<p:menuitem value="Importar Pedido"
				action="#{importarPedidoBean.iniciarTela()}" ajax="false" />
			<p:menuitem value="Importar Pedido" />
		</p:breadCrumb>
	</ui:define>
	<ui:param name="titulo" value="Importar Pedido" />

	<ui:define name="body_content">


		<h:panelGrid cellpadding="0" cellspacing="0" columns="1"
			styleClass="CorpoPagina" border="0">

			<p:fieldset legend="UPLOAD DO PEDIDO"
				toggleable="#{importarPedidoBean.habilitaPainelRevisaoPedido}"
				collapsed="#{importarPedidoBean.habilitaPainelRevisaoPedido}"
				style="margin-top:10px;margin-bottom:25px;">
				<h:panelGroup id="group-upload-pedido">
					<h:panelGrid cellpadding="0" cellspacing="0" columns="1" border="0"
						styleClass="centralizar-conteudo"
						style="margin-top:10px;margin-bottom:25px;">
						<p:fileUpload id="upload" style="width:100%; text-align: center;"
							fileUploadListener="#{importarPedidoBean.handleFileUpload}"
							mode="advanced"
							invalidFileMessage="Formato invalido, importe somente arquivos .XLS"
							dragDropSupport="true" update="@form"
							onstart="statusDialog.show();"
							oncomplete="statusDialog.hide();loadMasksJQuery();"
							sizeLimit="100000000" fileLimit="3" cancelLabel="Cancelar"
							label="Selecionar Planilha.." uploadLabel="Importar"
							allowTypes="/(\.|\/)(xls)$/" />
					</h:panelGrid>
				</h:panelGroup>
			</p:fieldset>

			<h:panelGroup id="tabela-selecao-produtos">
				<h:panelGrid cellpadding="0" cellspacing="1"
					styleClass="centralizar-conteudo" style="margin-top:20px;"
					rendered="#{importarPedidoBean.habilitaPainelRevisaoPedido}">
						<p:dataTable id="tableCatalogo"
							value="#{importarPedidoBean.listaProdutosInclusosPedido}"
							var="result" rowKey="#{result}" rows="10" editable="true"
							editMode="cell" styleClass="dataTable" paginator="true"
							paginatorPosition="bottom" emptyMessage="Dados não encontrados">
							<f:facet name="header">  
					            Produtos importados do pedido
					        </f:facet>

							<p:column headerText="CÓDIGO MK" style="text-align: center;"
								width="10%" sortBy="#{result.produto.codProduto}">
								<h:outputText value="#{result.produto.codProduto}"
									style="text-align: center;" />
							</p:column>
							<p:column headerText="PRODUTO" width="80%"
								sortBy="#{result.produto.descProduto}">
								<h:outputText value="#{result.produto.descProduto}"
									style="text-align: left;" />
							</p:column>
							<p:column headerText="QTDE" style="text-align: center;"
								width="10%" sortBy="#{result.qtdeProdutoCarrinho}">
								<h:outputText value="#{result.qtdeProdutoCarrinho}"
									style="text-align: center;" />
							</p:column>
						</p:dataTable>

						<h:panelGrid id="lblTotalReg" cellpadding="0" cellspacing="0"
							columns="2" style="	margin-top:5px;">
							<p:outputLabel value="Nº de produtos:" />
							<p:outputLabel value="#{importarPedidoBean.listaProdutosInclusosPedido.size()}"
								styleClass="input-5left HtmlOutputTextResposta" />
						</h:panelGrid>

					<hr class="lin"></hr>

					<h:panelGroup>
						<div class="buttonFooter">
							<p:commandButton id="btnVoltar" value="Voltar" ajax="false"
								style="float:left;" action="/index" immediate="true" />
							<p:commandButton id="btn-avancar" value="#{msgs.btn_avancar}"
								ajax="false"
								action="#{importarPedidoBean.navegarAddCategoriaProdutoFaltanteCatalogo()}"
								onclick="return alertaRevisarPedido(document.forms[1])"
								disabled="#{empty importarPedidoBean.listaProdutosInclusosPedido}" />
							<div style="height: 10px; width: 10px;"></div>
						</div>
					</h:panelGroup>

				</h:panelGrid>
			</h:panelGroup>
			<!-- FIM GROUP id=tabela-selecao-produtos -->
		</h:panelGrid>
	</ui:define>

</ui:composition>