<?xml version='1.0' encoding='ISO-8859-1' ?>
<ui:composition template="/template/template_main.xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

	<ui:define name="cssImports">
		<link type="text/css" rel="stylesheet"
			href="#{facesContext.externalContext.requestContextPath}/css/cadastro/clientes.css" />
	</ui:define>

	<ui:define name="jsImports">
		<script type="text/javascript"
			src="#{facesContext.externalContext.requestContextPath}/javascript/menu_venda/validate_venda.js"></script>
	</ui:define>

	<ui:define name="breadcrumb">
		<p:breadCrumb>
			<p:menuitem value="TelaInicial"
				action="#{reportContasReceberBean.scheduleBean.telaInicial()}"
				ajax="false" />
			<p:menuitem value="Relatórios" />
			<p:menuitem value="Relátório de Contas à Receber" />
		</p:breadCrumb>
	</ui:define>

	<ui:param name="titulo" value="Relatório de Contas à Receber"></ui:param>

	<ui:define name="body_content">

		<h:panelGrid cellpadding="0" cellspacing="0" columns="1"
			styleClass="CorpoPagina" border="0">
			<p:fieldset legend="FILTRO">
				<h:panelGroup id="tabela-filtro-relatorio">
					<h:panelGrid cellpadding="1" cellspacing="0" columns="4" border="0">
						<p:outputLabel value="Data Inicial:" styleClass="HtmlOutputLabelResposta" />
						<h:panelGroup>
							<p:calendar id="calendarDataInicial"
								value="#{reportContasReceberBean.dataInicial}" alt="date"
								pattern="dd/MM/yyyy" size="10" />
							<p:outputLabel value="Data Final:" styleClass=""
								style="margin-left:8px;" />
							<p:calendar id="calendarDataFinal"
								value="#{reportContasReceberBean.dataFinal}" alt="date" size="10"
								pattern="dd/MM/yyyy" />
						</h:panelGroup>

					</h:panelGrid>
				</h:panelGroup>
				<h:panelGroup>
					<div class="buttonFilter">
						<p:commandButton value="#{msgs.btn_limpar}"
							action="#{reportContasReceberBean.limparCamposFiltro()}" ajax="true"
							update="tabela-filtro-relatorio" />
						<p:commandButton value="#{msgs.btn_pesquisar}"
							action="#{reportContasReceberBean.pesquisarFiltro()}" ajax="true"
							onclick="return validarPesquisaHistoricoVendas(document.forms[1])"
							update="messagesGlobal :formGlobal:tabela-listagem-vendas"
							style="margin-left:5px;" />
					</div>
				</h:panelGroup>
			</p:fieldset>

			<hr class="lin" />

			<h:panelGroup id="tabela-listagem-vendas">
				<h:panelGrid cellpadding="0" cellspacing="0" columns="1"
					styleClass="centralizar-conteudo">
					<p:dataTable id="tbl-relatorio"
						value="#{reportContasReceberBean.parcelasFiltradas}"
						var="result" paginator="true" paginatorPosition="bottom"
						style="margin-top:20px" emptyMessage="Dados não encontrados"
						rows="10" sortBy="#{result.dataPagto}" sortOrder="ascending">

						<p:column headerText="CÓD. DA VENDA" width="5%" style="text-align: center;">
							<h:outputText value="#{result.codVenda}" />
						</p:column>

						<p:column headerText="CLIENTE" width="55%" >
							<h:outputText value="#{result.cliente}" />
						</p:column>

						<p:column headerText="SITUAÇÃO" width="10%" style="text-align: center;">
							<h:outputText value="#{result.descSituacao}" style="text-align: center;" />
						</p:column>

						<p:column headerText="VALOR DA PARCELA" width="10%" style="text-align: center;">
							<h:outputText value="R$ " style="text-align: center;"/>
							<h:outputText value="#{result.valorParcela}" style="text-align: center;">
								<f:converter converterId="decimalConverter" />
							</h:outputText>
						</p:column>

						<p:column headerText="DATA PATGO" width="10%" style="text-align: center;" >
							<h:outputText value="#{result.dataPagto}" style="text-align: center;">
								<f:convertDateTime pattern="dd/MM/yyyy" />
							</h:outputText>
						</p:column>

						<p:column headerText="VALOR PAGO" width="10%" style="text-align: center;">
							<h:outputText value="R$ " style="text-align: center;" />
							<h:outputText value="#{result.valorPago}" style="text-align: center;">
								<f:converter converterId="decimalConverter" />
							</h:outputText>
						</p:column>
						
					</p:dataTable>
				</h:panelGrid>

				<h:panelGrid id="painel-importacao" columns="1" styleClass="centralizar-conteudo" rendered="#{not empty reportContasReceberBean.parcelasFiltradas}" >
					<p:panel header="Exportar dados para:">
						<p:commandLink ajax="false">
							<p:graphicImage value="/images/pdf.png" />
							<p:fileDownload value="#{reportContasReceberBean.generateReportPDF()}" />
						</p:commandLink>
					</p:panel>
				</h:panelGrid>

			</h:panelGroup>

			<hr class="lin" />

			<h:panelGroup>
				<div class="buttonFooter">
					<p:commandButton id="btnVoltar" value="#{msgs.btn_voltar}"
						style="float:left;" action="/index" ajax="false" />
				</div>
				<div style="height: 10px; width: 10px;"></div>
			</h:panelGroup>

		</h:panelGrid>

	</ui:define>
</ui:composition>